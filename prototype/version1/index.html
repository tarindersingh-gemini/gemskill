<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GemSkill - Employee Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1e40af',
                        secondary: '#0ea5e9',
                        accent: '#8b5cf6',
                        success: '#10b981',
                        warning: '#f59e0b',
                        danger: '#ef4444'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 font-sans" x-data="employeeDashboard()">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <img src="logo.png" alt="GemSkill Logo" class="h-8 w-auto mr-3">
                    <h1 class="text-xl font-bold text-gray-900">GemSkill</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-sm text-gray-600">
                        Welcome, <span class="font-medium" x-text="employee.name"></span>
                    </div>
                    <button class="bg-primary text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
                        <i class="fas fa-sign-out-alt mr-2"></i>Logout
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Tab Navigation -->
        <div class="border-b border-gray-200 mb-8">
            <nav class="flex space-x-8" aria-label="Tabs">
                <button @click="activeTab = 'profile'" 
                        :class="activeTab === 'profile' ? 'border-primary text-primary' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                        class="whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm transition-colors">
                    <i class="fas fa-user mr-2"></i>My Profile
                </button>
                <button @click="activeTab = 'assessment'" 
                        :class="activeTab === 'assessment' ? 'border-primary text-primary' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                        class="whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm transition-colors">
                    <i class="fas fa-chart-bar mr-2"></i>Skill Assessment
                </button>
                <button @click="activeTab = 'development'" 
                        :class="activeTab === 'development' ? 'border-primary text-primary' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                        class="whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm transition-colors">
                    <i class="fas fa-road mr-2"></i>Career Development Plan
                </button>
            </nav>
        </div>

        <!-- Profile Tab -->
        <div x-show="activeTab === 'profile'" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-4" x-transition:enter-end="opacity-100 transform translate-x-0">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Employee Overview -->
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Employee Overview</h3>
                        <div class="text-center mb-6">
                            <img :src="employee.profilePicture" :alt="employee.name" class="w-24 h-24 rounded-full mx-auto mb-4 object-cover">
                            <h4 class="text-xl font-bold text-gray-900" x-text="employee.name"></h4>
                            <p class="text-gray-600" x-text="employee.designation"></p>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center">
                                <i class="fas fa-envelope text-gray-400 w-5"></i>
                                <span class="ml-3 text-sm text-gray-600" x-text="employee.email"></span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-phone text-gray-400 w-5"></i>
                                <span class="ml-3 text-sm text-gray-600" x-text="employee.phone"></span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-building text-gray-400 w-5"></i>
                                <span class="ml-3 text-sm text-gray-600" x-text="employee.department"></span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-map-marker-alt text-gray-400 w-5"></i>
                                <span class="ml-3 text-sm text-gray-600" x-text="employee.location"></span>
                            </div>
                        </div>
                        <button class="w-full mt-6 bg-primary text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors">
                            <i class="fas fa-edit mr-2"></i>Edit Profile
                        </button>
                    </div>
                </div>

                <!-- Education and Experience -->
                <div class="lg:col-span-2 space-y-6">
                    <!-- Education -->
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Education</h3>
                        <template x-for="edu in employee.education" :key="edu.degree">
                            <div class="border-l-4 border-primary pl-4 py-2">
                                <h4 class="font-medium text-gray-900" x-text="edu.degree"></h4>
                                <p class="text-gray-600" x-text="edu.institution"></p>
                                <p class="text-sm text-gray-500" x-text="edu.year"></p>
                            </div>
                        </template>
                    </div>

                    <!-- Experience -->
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Work Experience</h3>
                        <template x-for="exp in employee.experience" :key="exp.company">
                            <div class="border-l-4 border-secondary pl-4 py-2">
                                <h4 class="font-medium text-gray-900" x-text="exp.position"></h4>
                                <p class="text-gray-600" x-text="exp.company"></p>
                                <p class="text-sm text-gray-500" x-text="exp.duration"></p>
                                <p class="text-sm text-gray-700 mt-2" x-text="exp.description"></p>
                            </div>
                        </template>
                    </div>

                    <!-- Certifications -->
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Certifications</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <template x-for="cert in employee.certifications" :key="cert.name">
                                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                    <h4 class="font-medium text-gray-900" x-text="cert.name"></h4>
                                    <p class="text-sm text-gray-600" x-text="cert.issuer"></p>
                                    <p class="text-sm text-gray-500" x-text="cert.date"></p>
                                    <a :href="cert.verificationLink" class="text-primary hover:text-blue-700 text-sm mt-2 inline-block">
                                        <i class="fas fa-external-link-alt mr-1"></i>Verify
                                    </a>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Skill Assessment Tab -->
        <div x-show="activeTab === 'assessment'" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-4" x-transition:enter-end="opacity-100 transform translate-x-0">
            <!-- Job Description Section -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
                <h3 class="text-lg font-semibold text-gray-900 mb-6">Job Description</h3>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <!-- Job Role Overview -->
                    <div>
                        <h4 class="text-md font-medium text-gray-900 mb-4">Job Role Overview</h4>
                        <div class="space-y-3">
                            <div><span class="font-medium">Role:</span> <span x-text="jobRole.name"></span></div>
                            <div><span class="font-medium">ID:</span> <span x-text="jobRole.id"></span></div>
                            <div><span class="font-medium">Level:</span> <span x-text="jobRole.level"></span></div>
                            <div><span class="font-medium">Location:</span> <span x-text="jobRole.location"></span></div>
                            <div><span class="font-medium">Employment:</span> <span x-text="jobRole.employmentType"></span></div>
                        </div>
                        <p class="text-gray-700 mt-4" x-text="jobRole.description"></p>
                    </div>

                    <!-- Key Responsibilities and KPIs -->
                    <div>
                        <h4 class="text-md font-medium text-gray-900 mb-4">Key Responsibilities</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm text-gray-700 mb-4">
                            <template x-for="responsibility in jobRole.keyResponsibilities" :key="responsibility">
                                <li x-text="responsibility"></li>
                            </template>
                        </ul>
                        
                        <h4 class="text-md font-medium text-gray-900 mb-2">Key Performance Indicators</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm text-gray-700">
                            <template x-for="kpi in jobRole.kpis" :key="kpi">
                                <li x-text="kpi"></li>
                            </template>
                        </ul>
                    </div>
                </div>

                <!-- Skills Required Section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Mandatory Skills -->
                    <div>
                        <h4 class="text-md font-medium text-gray-900 mb-4 flex items-center">
                            <i class="fas fa-star text-red-500 mr-2"></i>Mandatory Skills
                        </h4>
                        <div class="space-y-3">
                            <template x-for="skillId in (jobRole.mandatorySkills || [])" :key="skillId">
                                <div x-data="{ skill: skills.find(s => s.id === skillId) }" class="bg-red-50 border border-red-200 rounded-lg p-3">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="font-medium text-gray-900" x-text="skill?.name || 'Loading...'"></span>
                                        <span class="text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full">Required</span>
                                    </div>
                                    <div class="mb-2">
                                        <div class="flex justify-between text-xs text-gray-600 mb-1">
                                            <span>Current Proficiency</span>
                                            <span x-text="(skill?.currentLevel || 0) + '/5'"></span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                            <div :class="getProgressBarClass(skill?.currentLevel || 0)" :style="'width: ' + ((skill?.currentLevel || 0) * 20) + '%'" class="h-2 rounded-full transition-all duration-300"></div>
                                        </div>
                                    </div>
                                    <p class="text-xs text-gray-600" x-text="skill?.description || 'Skill description loading...'"></p>
                                </div>
                            </template>
                        </div>
                    </div>

                    <!-- Desired Skills -->
                    <div>
                        <h4 class="text-md font-medium text-gray-900 mb-4 flex items-center">
                            <i class="fas fa-heart text-blue-500 mr-2"></i>Desired Skills
                        </h4>
                        <div class="space-y-3">
                            <template x-for="skillId in (jobRole.desiredSkills || [])" :key="skillId">
                                <div x-data="{ skill: skills.find(s => s.id === skillId) }" class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="font-medium text-gray-900" x-text="skill?.name || 'Loading...'"></span>
                                        <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">Beneficial</span>
                                    </div>
                                    <div class="mb-2">
                                        <div class="flex justify-between text-xs text-gray-600 mb-1">
                                            <span>Current Proficiency</span>
                                            <span x-text="(skill?.currentLevel || 0) + '/5'"></span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                            <div :class="getProgressBarClass(skill?.currentLevel || 0)" :style="'width: ' + ((skill?.currentLevel || 0) * 20) + '%'" class="h-2 rounded-full transition-all duration-300"></div>
                                        </div>
                                    </div>
                                    <p class="text-xs text-gray-600" x-text="skill?.description || 'Skill description loading...'"></p>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Skill Assessment Section -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-lg font-semibold text-gray-900">Skill Assessment</h3>
                    <button class="bg-primary text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
                        <i class="fas fa-edit mr-2"></i>Request Skill Update
                    </button>
                </div>

                <!-- Skill Overview -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-green-600" x-text="getSkillsByStatus('Strength').length"></div>
                        <div class="text-sm text-green-700">Strengths</div>
                        <div class="text-xs text-green-600">Rating 4+</div>
                    </div>
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-blue-600" x-text="getSkillsByStatus('Skilled').length"></div>
                        <div class="text-sm text-blue-700">Skilled</div>
                        <div class="text-xs text-blue-600">Rating 3</div>
                    </div>
                    <div class="bg-orange-50 border border-orange-200 rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-orange-600" x-text="getSkillsByStatus('Opportunity').length"></div>
                        <div class="text-sm text-orange-700">Opportunities</div>
                        <div class="text-xs text-orange-600">Rating â‰¤2</div>
                    </div>
                </div>

                <!-- Rating Scale Reference -->
                <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6">
                    <h4 class="text-sm font-medium text-gray-900 mb-3 flex items-center">
                        <i class="fas fa-info-circle text-blue-500 mr-2"></i>Skill Rating Scale
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-5 gap-3 text-xs">
                        <div class="flex items-center">
                            <span class="inline-flex items-center justify-center w-6 h-6 bg-red-100 text-red-800 rounded-full font-medium mr-2">1</span>
                            <span class="text-gray-700">No experience at all</span>
                        </div>
                        <div class="flex items-center">
                            <span class="inline-flex items-center justify-center w-6 h-6 bg-orange-100 text-orange-800 rounded-full font-medium mr-2">2</span>
                            <span class="text-gray-700">Training received</span>
                        </div>
                        <div class="flex items-center">
                            <span class="inline-flex items-center justify-center w-6 h-6 bg-blue-100 text-blue-800 rounded-full font-medium mr-2">3</span>
                            <span class="text-gray-700">Can perform tasks under supervision</span>
                        </div>
                        <div class="flex items-center">
                            <span class="inline-flex items-center justify-center w-6 h-6 bg-green-100 text-green-800 rounded-full font-medium mr-2">4</span>
                            <span class="text-gray-700">Doesn't require supervision</span>
                        </div>
                        <div class="flex items-center">
                            <span class="inline-flex items-center justify-center w-6 h-6 bg-green-200 text-green-900 rounded-full font-medium mr-2">5</span>
                            <span class="text-gray-700">Can train other team members</span>
                        </div>
                    </div>
                </div>

                <!-- Skills Filter -->
                <div class="mb-6">
                    <div class="flex flex-col sm:flex-row gap-4">
                        <div class="flex-1">
                            <input type="text" x-model="skillFilter" placeholder="Search skills..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                        <select x-model="statusFilter" class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                            <option value="">All Skills</option>
                            <option value="Strength">Strengths</option>
                            <option value="Skilled">Skilled</option>
                            <option value="Opportunity">Opportunities</option>
                        </select>
                    </div>
                </div>

                <!-- Skills List -->
                <div class="space-y-4">
                    <template x-for="skill in filteredSkills" :key="skill.id">
                        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                            <div class="flex justify-between items-start mb-3">
                                <div>
                                    <h4 class="font-medium text-gray-900" x-text="skill.name"></h4>
                                    <p class="text-sm text-gray-600" x-text="skill.description"></p>
                                </div>
                                <span :class="getStatusBadgeClass(skill.status)" class="px-2 py-1 text-xs font-medium rounded-full" x-text="skill.status"></span>
                            </div>
                            
                            <!-- Skill Level Progress Bar -->
                            <div class="mb-3">
                                <div class="flex justify-between text-sm text-gray-600 mb-1">
                                    <span>Current Level</span>
                                    <span x-text="skill.currentLevel + '/5'"></span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div :class="getProgressBarClass(skill.currentLevel)" :style="'width: ' + (skill.currentLevel * 20) + '%'" class="h-2 rounded-full transition-all duration-300"></div>
                                </div>
                            </div>
                            
                            <div class="text-xs text-gray-500">
                                <span>Last rated: </span><span x-text="formatDate(skill.lastRatedDate)"></span>
                                <span class="ml-4">Comments: </span><span x-text="skill.comments"></span>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </div>

        <!-- Career Development Plan Tab -->
        <div x-show="activeTab === 'development'" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-4" x-transition:enter-end="opacity-100 transform translate-x-0">
            <!-- Development Plan Summary -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
                <h3 class="text-lg font-semibold text-gray-900 mb-6">Development Plan Summary</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-blue-600" x-text="developmentPlan.summary.totalSkills"></div>
                        <div class="text-sm text-blue-700">Total Skills</div>
                    </div>
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-green-600" x-text="developmentPlan.summary.completedSkills"></div>
                        <div class="text-sm text-green-700">Completed</div>
                    </div>
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-yellow-600" x-text="developmentPlan.summary.inProgressSkills"></div>
                        <div class="text-sm text-yellow-700">In Progress</div>
                    </div>
                    <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 text-center">
                        <div class="text-2xl font-bold text-gray-600" x-text="developmentPlan.summary.notStartedSkills"></div>
                        <div class="text-sm text-gray-700">Not Started</div>
                    </div>
                </div>

                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center">
                    <div>
                        <p><span class="font-medium">Status:</span> <span :class="developmentPlan.status === 'Active' ? 'text-green-600' : 'text-gray-600'" x-text="developmentPlan.status"></span></p>
                        <p><span class="font-medium">Duration:</span> <span x-text="formatDate(developmentPlan.startDate) + ' - ' + formatDate(developmentPlan.endDate)"></span></p>
                    </div>
                    <button class="mt-4 sm:mt-0 bg-primary text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
                        <i class="fas fa-plus mr-2"></i>Add Development Activity
                    </button>
                </div>
            </div>

            <!-- Development Plan Skills -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
                <h3 class="text-lg font-semibold text-gray-900 mb-6">Development Plan Skills</h3>
                
                <!-- Filter Controls -->
                <div class="mb-6">
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input type="text" x-model="devSkillFilter" placeholder="Search skills..." class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                        <select x-model="devStatusFilter" class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                            <option value="">All Status</option>
                            <option value="Active">Active</option>
                            <option value="Inactive">Inactive</option>
                        </select>
                        <select x-model="devProgressFilter" class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                            <option value="">All Progress</option>
                            <option value="Not Started">Not Started</option>
                            <option value="In Progress">In Progress</option>
                            <option value="Completed">Completed</option>
                        </select>
                    </div>
                </div>

                <!-- Skills Table -->
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Skill</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Current Level</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Target Level</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Timeline</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Progress</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <template x-for="skill in filteredDevSkills" :key="skill.skillId">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm font-medium text-gray-900" x-text="skill.skillName"></div>
                                        <div class="text-sm text-gray-500" x-text="'Assigned by: ' + skill.assignedBy"></div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800" x-text="skill.currentLevel"></span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800" x-text="skill.targetLevel"></span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <div x-text="formatDate(skill.startDate)"></div>
                                        <div class="text-xs" x-text="'to ' + formatDate(skill.endDate)"></div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span :class="getProgressBadgeClass(skill.progress)" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium" x-text="skill.progress"></span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                                        <a :href="skill.courseLink" class="text-primary hover:text-blue-700 mr-3">
                                            <i class="fas fa-external-link-alt mr-1"></i>Course
                                        </a>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Development Activities -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-6">Development Activities</h3>
                
                <div class="space-y-4">
                    <template x-for="activity in developmentPlan.activities" :key="activity.id">
                        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                            <div class="flex justify-between items-start">
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900" x-text="activity.name"></h4>
                                    <p class="text-sm text-gray-600 mt-1" x-text="activity.description"></p>
                                    <div class="flex items-center mt-2 text-xs text-gray-500">
                                        <i class="fas fa-calendar mr-1"></i>
                                        <span x-text="formatDate(activity.scheduledDate)"></span>
                                        <span class="ml-4">Assigned by: </span>
                                        <span x-text="activity.assignedBy"></span>
                                    </div>
                                </div>
                                <span :class="getProgressBadgeClass(activity.status)" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ml-4" x-text="activity.status"></span>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </div>
    </div>

    <script>
        function employeeDashboard() {
            return {
                activeTab: 'profile',
                skillFilter: '',
                statusFilter: '',
                devSkillFilter: '',
                devStatusFilter: '',
                devProgressFilter: '',
                employee: {},
                jobRole: {},
                skills: [],
                developmentPlan: {},

                async init() {
                    // Initialize with fallback data first to ensure something displays
                    this.initFallbackData();
                    
                    // Then try to load data from JSON files to override fallback
                    try {
                        const employeeResponse = await fetch('./data/employee-data.json');
                        const employeeData = await employeeResponse.json();
                        this.employee = employeeData.employee;
                        this.jobRole = employeeData.jobRole;

                        const skillsResponse = await fetch('./data/skills-data.json');
                        const skillsData = await skillsResponse.json();
                        this.skills = skillsData.skills;

                        const devPlanResponse = await fetch('./data/development-plan.json');
                        const devPlanData = await devPlanResponse.json();
                        this.developmentPlan = devPlanData.developmentPlan;
                        
                        console.log('Data loaded successfully from JSON files');
                    } catch (error) {
                        console.log('Using fallback data due to:', error.message);
                    }
                },

                initFallbackData() {
                    this.employee = {
                        name: "John Doe",
                        email: "john.doe@company.com",
                        phone: "+1-555-0123",
                        designation: "Software Engineer - L2",
                        department: "Engineering",
                        location: "San Francisco, CA",
                        profilePicture: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",
                        education: [{
                            degree: "Bachelor of Science in Computer Science",
                            institution: "University of California, Berkeley",
                            year: "2019"
                        }],
                        experience: [{
                            company: "TechCorp",
                            position: "Software Engineer",
                            duration: "2019 - Present",
                            description: "Full-stack development using Python, JavaScript, and cloud technologies"
                        }],
                        certifications: [{
                            name: "AWS Certified Developer",
                            issuer: "Amazon Web Services",
                            date: "2023",
                            verificationLink: "https://aws.amazon.com/verification"
                        }]
                    };

                    this.jobRole = {
                        id: "JR_SE_L2_001",
                        name: "Software Engineer - L2",
                        description: "Responsible for designing, developing, and maintaining software applications with focus on quality and performance.",
                        deliveryCouncil: "Engineering Excellence",
                        subDeliveryCouncil: "Backend Development",
                        level: "L2",
                        location: "San Francisco, CA",
                        employmentType: "Full-time",
                        mandatorySkills: ["python_advanced", "oop_advanced", "rest_apis_advanced", "debugging_proficient", "git_proficient"],
                        desiredSkills: ["microservices_basic", "design_patterns_basic", "cloud_advanced"],
                        keyResponsibilities: [
                            "Design and develop scalable software solutions",
                            "Write clean, maintainable, and well-tested code",
                            "Collaborate with cross-functional teams",
                            "Participate in code reviews and technical discussions",
                            "Mentor junior developers"
                        ],
                        kpis: [
                            "Code Quality (Defect Rate < 2%)",
                            "Code Coverage (> 80%)",
                            "Sprint Velocity",
                            "Ticket Resolution Time"
                        ]
                    };

                    this.skills = [
                        {
                            id: "python_advanced",
                            name: "Python Programming",
                            category: "Technical",
                            description: "Advanced Python programming including frameworks and libraries",
                            currentLevel: 4,
                            targetLevel: 5,
                            lastRatedDate: "2024-07-15",
                            ratedBy: "MGR001",
                            comments: "Strong Python skills, ready for advanced projects",
                            status: "Strength"
                        },
                        {
                            id: "oop_advanced",
                            name: "Object-Oriented Programming",
                            category: "Technical",
                            description: "Advanced OOP concepts and design principles",
                            currentLevel: 4,
                            targetLevel: 4,
                            lastRatedDate: "2024-07-15",
                            ratedBy: "MGR001",
                            comments: "Excellent understanding of OOP principles",
                            status: "Strength"
                        },
                        {
                            id: "rest_apis_advanced",
                            name: "REST APIs",
                            category: "Technical",
                            description: "Design and implementation of RESTful web services",
                            currentLevel: 4,
                            targetLevel: 4,
                            lastRatedDate: "2024-07-10",
                            ratedBy: "MGR001",
                            comments: "Strong API design skills",
                            status: "Strength"
                        },
                        {
                            id: "debugging_proficient",
                            name: "Debugging",
                            category: "Technical",
                            description: "Systematic debugging and troubleshooting skills",
                            currentLevel: 3,
                            targetLevel: 4,
                            lastRatedDate: "2024-06-20",
                            ratedBy: "MGR001",
                            comments: "Good debugging skills, can work independently",
                            status: "Skilled"
                        },
                        {
                            id: "git_proficient",
                            name: "Git Version Control",
                            category: "Technical",
                            description: "Version control using Git and collaboration workflows",
                            currentLevel: 3,
                            targetLevel: 3,
                            lastRatedDate: "2024-06-15",
                            ratedBy: "MGR001",
                            comments: "Comfortable with Git workflows",
                            status: "Skilled"
                        },
                        {
                            id: "microservices_basic",
                            name: "Microservices Architecture",
                            category: "Technical",
                            description: "Understanding and implementation of microservices patterns",
                            currentLevel: 2,
                            targetLevel: 3,
                            lastRatedDate: "2024-05-30",
                            ratedBy: "MGR001",
                            comments: "Needs more hands-on experience with microservices",
                            status: "Opportunity"
                        },
                        {
                            id: "design_patterns_basic",
                            name: "Design Patterns",
                            category: "Technical",
                            description: "Common software design patterns and their applications",
                            currentLevel: 2,
                            targetLevel: 3,
                            lastRatedDate: "2024-05-25",
                            ratedBy: "MGR001",
                            comments: "Basic understanding, needs practical application",
                            status: "Opportunity"
                        },
                        {
                            id: "cloud_advanced",
                            name: "Cloud Technologies",
                            category: "Technical",
                            description: "Cloud platforms, services, and deployment strategies",
                            currentLevel: 3,
                            targetLevel: 4,
                            lastRatedDate: "2024-07-01",
                            ratedBy: "MGR001",
                            comments: "Good cloud knowledge, expanding to advanced concepts",
                            status: "Skilled"
                        }
                    ];

                    this.developmentPlan = {
                        id: "DP_001",
                        employeeId: "EMP001",
                        startDate: "2024-08-01",
                        endDate: "2024-12-31",
                        status: "Active",
                        progress: "In Progress",
                        summary: {
                            totalSkills: 3,
                            completedSkills: 0,
                            inProgressSkills: 2,
                            notStartedSkills: 1
                        },
                        skills: [
                            {
                                skillId: "microservices_basic",
                                skillName: "Microservices Architecture",
                                currentLevel: 2,
                                targetLevel: 3,
                                startDate: "2024-08-01",
                                endDate: "2024-10-31",
                                status: "Active",
                                progress: "In Progress",
                                assignedBy: "MGR001",
                                courseLink: "https://athena.company.com/microservices-101"
                            }
                        ],
                        activities: [
                            {
                                id: "ACT_001",
                                name: "Microservices Workshop",
                                description: "Hands-on workshop on building microservices with Docker and Kubernetes",
                                scheduledDate: "2024-09-15",
                                status: "In Progress",
                                assignedBy: "MGR001"
                            }
                        ]
                    };
                },

                get filteredSkills() {
                    return this.skills.filter(skill => {
                        const matchesFilter = !this.skillFilter || 
                            skill.name.toLowerCase().includes(this.skillFilter.toLowerCase()) ||
                            skill.description.toLowerCase().includes(this.skillFilter.toLowerCase());
                        const matchesStatus = !this.statusFilter || skill.status === this.statusFilter;
                        return matchesFilter && matchesStatus;
                    });
                },

                get filteredDevSkills() {
                    return this.developmentPlan.skills?.filter(skill => {
                        const matchesFilter = !this.devSkillFilter || 
                            skill.skillName.toLowerCase().includes(this.devSkillFilter.toLowerCase());
                        const matchesStatus = !this.devStatusFilter || skill.status === this.devStatusFilter;
                        const matchesProgress = !this.devProgressFilter || skill.progress === this.devProgressFilter;
                        return matchesFilter && matchesStatus && matchesProgress;
                    }) || [];
                },

                getSkillsByStatus(status) {
                    return this.skills.filter(skill => skill.status === status);
                },

                getStatusBadgeClass(status) {
                    const classes = {
                        'Strength': 'bg-green-100 text-green-800',
                        'Skilled': 'bg-blue-100 text-blue-800',
                        'Opportunity': 'bg-orange-100 text-orange-800'
                    };
                    return classes[status] || 'bg-gray-100 text-gray-800';
                },

                getProgressBarClass(level) {
                    if (level >= 4) return 'bg-green-500';
                    if (level >= 3) return 'bg-blue-500';
                    return 'bg-orange-500';
                },

                getProgressBadgeClass(progress) {
                    const classes = {
                        'Completed': 'bg-green-100 text-green-800',
                        'In Progress': 'bg-yellow-100 text-yellow-800',
                        'Not Started': 'bg-gray-100 text-gray-800'
                    };
                    return classes[progress] || 'bg-gray-100 text-gray-800';
                },

                formatDate(dateString) {
                    return new Date(dateString).toLocaleDateString();
                }
            }
        }
    </script>
</body>
</html>
